<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Project: /home/travis/build/AliceO2Group/AliceO2/Detectors/TPC/workflow/src/RecoWorkflow.cxx Source File</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<link href="../../navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../resize.js"></script>
<script type="text/javascript" src="../../navtreedata.js"></script>
<script type="text/javascript" src="../../navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="../../o2_logo.png"/></td>
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Project
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "../../search",false,'Search');
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('d0/d80/TPC_2workflow_2src_2RecoWorkflow_8cxx_source.html','../../');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">RecoWorkflow.cxx</div>  </div>
</div><!--header-->
<div class="contents">
<a href="../../d0/d80/TPC_2workflow_2src_2RecoWorkflow_8cxx.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">// Copyright CERN and copyright holders of ALICE O2. This software is</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">// distributed under the terms of the GNU General Public License v3 (GPL</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">// Version 3), copied verbatim in the file &quot;COPYING&quot;.</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">// See http://alice-o2.web.cern.ch/license for full licensing information.</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment">//</span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">// In applying this license CERN does not waive the privileges and immunities</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">// granted to it by virtue of its status as an Intergovernmental Organization</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">// or submit itself to any jurisdiction.</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;</div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;</div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/da1/WorkflowSpec_8h.html">Framework/WorkflowSpec.h</a>&quot;</span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d6/d68/DataSpecUtils_8h.html">Framework/DataSpecUtils.h</a>&quot;</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dc8/MakeRootTreeWriterSpec_8h.html">DPLUtils/MakeRootTreeWriterSpec.h</a>&quot;</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../df/d08/TPC_2workflow_2include_2TPCWorkflow_2RecoWorkflow_8h.html">TPCWorkflow/RecoWorkflow.h</a>&quot;</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d9/d4e/TPC_2workflow_2include_2TPCWorkflow_2PublisherSpec_8h.html">TPCWorkflow/PublisherSpec.h</a>&quot;</span></div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/da4/TPC_2workflow_2include_2TPCWorkflow_2ClustererSpec_8h.html">TPCWorkflow/ClustererSpec.h</a>&quot;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/dfa/ClusterDecoderRawSpec_8h.html">TPCWorkflow/ClusterDecoderRawSpec.h</a>&quot;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d55/CATrackerSpec_8h.html">TPCWorkflow/CATrackerSpec.h</a>&quot;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/dc5/RangeTokenizer_8h.html">Algorithm/RangeTokenizer.h</a>&quot;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/d4f/Detectors_2TPC_2base_2include_2TPCBase_2Digit_8h.html">TPCBase/Digit.h</a>&quot;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h.html">DataFormatsTPC/Constants.h</a>&quot;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d8/dc8/ClusterGroupAttribute_8h.html">DataFormatsTPC/ClusterGroupAttribute.h</a>&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d5/dc9/TrackTPC_8h.html">DataFormatsTPC/TrackTPC.h</a>&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d3/d09/TPCSectorHeader_8h.html">DataFormatsTPC/TPCSectorHeader.h</a>&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../db/d14/MCTruthContainer_8h.html">SimulationDataFormat/MCTruthContainer.h</a>&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="../../d7/dcd/MCCompLabel_8h.html">SimulationDataFormat/MCCompLabel.h</a>&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;</div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;FairMQLogger.h&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &lt;string&gt;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &lt;iomanip&gt;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &lt;unordered_map&gt;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &lt;stdexcept&gt;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &lt;algorithm&gt;</span> <span class="comment">// std::find</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &lt;tuple&gt;</span>     <span class="comment">// make_tuple</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;</div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="keyword">namespace </span><a class="code" href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;{</div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="keyword">namespace </span>tpc</div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;{</div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="keyword">namespace </span>reco_workflow</div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;{</div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;</div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="keyword">using namespace </span>framework;</div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="keyword">template</span> &lt;<span class="keyword">typename</span> T&gt;</div><div class="line"><a name="l00054"></a><span class="lineno"><a class="line" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a141e6794903ed3061cd056e689dcc868">   54</a></span>&#160;<span class="keyword">using</span> <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition</a> = <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">MakeRootTreeWriterSpec::BranchDefinition&lt;T&gt;</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00056"></a><span class="lineno"><a class="line" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a6d4dad0d73541e04c795718ab0fcc384">   56</a></span>&#160;<span class="keyword">const</span> std::unordered_map&lt;std::string, InputType&gt; <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a6d4dad0d73541e04c795718ab0fcc384">InputMap</a>{</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;  {<span class="stringliteral">&quot;digitizer&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a02d3268c1419bc6522d01c0606e67cb9">InputType::Digitizer</a>},</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;  {<span class="stringliteral">&quot;digits&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">InputType::Digits</a>},</div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;  {<span class="stringliteral">&quot;raw&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">InputType::Raw</a>},</div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;  {<span class="stringliteral">&quot;clusters&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">InputType::Clusters</a>},</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;};</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;</div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#aebd5ed60acdcf3d977f7924f2974b4f1">   63</a></span>&#160;<span class="keyword">const</span> std::unordered_map&lt;std::string, OutputType&gt; <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#aebd5ed60acdcf3d977f7924f2974b4f1">OutputMap</a>{</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;  {<span class="stringliteral">&quot;digits&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">OutputType::Digits</a>},</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;  {<span class="stringliteral">&quot;raw&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">OutputType::Raw</a>},</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;  {<span class="stringliteral">&quot;clusters&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a9b99bf7d2bfd4b09363304c166832734">OutputType::Clusters</a>},</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;  {<span class="stringliteral">&quot;tracks&quot;</span>, <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a259e64c61d5d1036664ae826072cafc0">OutputType::Tracks</a>},</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;};</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;</div><div class="line"><a name="l00070"></a><span class="lineno"><a class="line" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a7a79715dc848ee61a9cd3a252a903391">   70</a></span>&#160;<a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a7daf5fb16896e1e754a18cfcf37e665b">framework::WorkflowSpec</a> <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a7a79715dc848ee61a9cd3a252a903391">getWorkflow</a>(std::vector&lt;int&gt; <span class="keyword">const</span>&amp; tpcSectors, std::vector&lt;int&gt; <span class="keyword">const</span>&amp; laneConfiguration,</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                    <span class="keywordtype">bool</span> propagateMC, <span class="keywordtype">unsigned</span> nLanes, std::string <span class="keyword">const</span>&amp; cfgInput, std::string <span class="keyword">const</span>&amp; cfgOutput,</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                    <span class="keywordtype">int</span> caClusterer)</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;{</div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;  <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57">InputType</a> inputType;</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;</div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;    inputType = <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a6d4dad0d73541e04c795718ab0fcc384">InputMap</a>.at(cfgInput);</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;  } <span class="keywordflow">catch</span> (std::out_of_range&amp;) {</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(std::string(<span class="stringliteral">&quot;invalid input type: &quot;</span>) + cfgInput);</div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;  }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;  std::vector&lt;OutputType&gt; outputTypes;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;  <span class="keywordflow">try</span> {</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;    outputTypes = RangeTokenizer::tokenize&lt;OutputType&gt;(cfgOutput, [](std::string <span class="keyword">const</span>&amp; token) { <span class="keywordflow">return</span> <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#aebd5ed60acdcf3d977f7924f2974b4f1">OutputMap</a>.at(token); });</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;  } <span class="keywordflow">catch</span> (std::out_of_range&amp;) {</div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(std::string(<span class="stringliteral">&quot;invalid output type: &quot;</span>) + cfgOutput);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;  }</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;  <span class="keyword">auto</span> isEnabled = [&amp;outputTypes](<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0">OutputType</a> <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>) {</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;    <span class="keywordflow">return</span> std::find(outputTypes.begin(), outputTypes.end(), <a class="code" href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a>) != outputTypes.end();</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;  };</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;  <span class="keywordflow">if</span> (inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">InputType::Raw</a> &amp;&amp; isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">OutputType::Digits</a>)) { <span class="comment">// TODO: We should rename Raw to</span></div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;input/output type mismatch, can not produce &#39;digits&#39; from &#39;raw&#39;&quot;</span>);</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;  }</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;  <span class="keywordflow">if</span> (inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">InputType::Clusters</a> &amp;&amp; (isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">OutputType::Digits</a>) || isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">OutputType::Raw</a>))) {</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;input/output type mismatch, can not produce &#39;digits&#39;, nor &#39;raw&#39; from &#39;clusters&#39;&quot;</span>);</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;  }</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;  <span class="keywordflow">if</span> (caClusterer &amp;&amp; (inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">InputType::Clusters</a> || inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">InputType::Raw</a>)) {</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;ca-clusterer requires digits as input&quot;</span>);</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;  }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;  <span class="keywordflow">if</span> (caClusterer &amp;&amp; (isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a9b99bf7d2bfd4b09363304c166832734">OutputType::Clusters</a>) || isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">OutputType::Raw</a>))) {</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;ca-clusterer cannot produce Clusters or Raw output&quot;</span>);</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;  }</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;  <span class="keywordflow">if</span> (caClusterer &amp;&amp; propagateMC) {</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;    <span class="keywordflow">throw</span> std::invalid_argument(<span class="stringliteral">&quot;ca-clusterer cannot yet propagate MC information&quot;</span>);</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;  }</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;  <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a7daf5fb16896e1e754a18cfcf37e665b">WorkflowSpec</a> specs;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;  <span class="comment">// The OutputSpec of the PublisherSpec is configured depending on the input</span></div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;  <span class="comment">// type. Note that the configuration of the dispatch trigger in the main file</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;  <span class="comment">// needs to be done in accordance. This means, if a new input option is added</span></div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;  <span class="comment">// also the dispatch trigger needs to be updated.</span></div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;  <span class="keywordflow">if</span> (inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">InputType::Digits</a>) {</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;    specs.emplace_back(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a741ff666157ca42314ba203533118eb4">o2::tpc::getPublisherSpec</a>(<a class="code" href="../../de/d7a/structo2_1_1tpc_1_1PublisherConf.html">PublisherConf</a>{</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                                                   <span class="stringliteral">&quot;tpc-digit-reader&quot;</span>,</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                                                   <span class="stringliteral">&quot;o2sim&quot;</span>,</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                                                   {<span class="stringliteral">&quot;digitbranch&quot;</span>, <span class="stringliteral">&quot;TPCDigit&quot;</span>, <span class="stringliteral">&quot;Digit branch&quot;</span>},</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                                                   {<span class="stringliteral">&quot;mcbranch&quot;</span>, <span class="stringliteral">&quot;TPCDigitMCTruth&quot;</span>, <span class="stringliteral">&quot;MC label branch&quot;</span>},</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                                                   <a class="code" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;DIGITS&quot;</span>},</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                                   <a class="code" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;DIGITSMCTR&quot;</span>},</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                                                   tpcSectors,</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                                                   laneConfiguration,</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                                                 },</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                                                 propagateMC));</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">InputType::Raw</a>) {</div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;    specs.emplace_back(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a741ff666157ca42314ba203533118eb4">o2::tpc::getPublisherSpec</a>(<a class="code" href="../../de/d7a/structo2_1_1tpc_1_1PublisherConf.html">PublisherConf</a>{</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                                                   <span class="stringliteral">&quot;tpc-raw-cluster-reader&quot;</span>,</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                                                   <span class="stringliteral">&quot;tpcraw&quot;</span>,</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                                                   {<span class="stringliteral">&quot;databranch&quot;</span>, <span class="stringliteral">&quot;TPCClusterHw&quot;</span>, <span class="stringliteral">&quot;Branch with TPC raw clusters&quot;</span>},</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                                                   {<span class="stringliteral">&quot;mcbranch&quot;</span>, <span class="stringliteral">&quot;TPCClusterHwMCTruth&quot;</span>, <span class="stringliteral">&quot;MC label branch&quot;</span>},</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                                                   <a class="code" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSTERHW&quot;</span>},</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                                                   <a class="code" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSTERHWMCLBL&quot;</span>},</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                                                   tpcSectors,</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                                   laneConfiguration,</div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                                                 },</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                                 propagateMC));</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;  } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">InputType::Clusters</a>) {</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;    specs.emplace_back(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a741ff666157ca42314ba203533118eb4">o2::tpc::getPublisherSpec</a>(<a class="code" href="../../de/d7a/structo2_1_1tpc_1_1PublisherConf.html">PublisherConf</a>{</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                                                   <span class="stringliteral">&quot;tpc-native-cluster-reader&quot;</span>,</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                                                   <span class="stringliteral">&quot;tpcrec&quot;</span>,</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                                                   {<span class="stringliteral">&quot;clusterbranch&quot;</span>, <span class="stringliteral">&quot;TPCClusterNative&quot;</span>, <span class="stringliteral">&quot;Branch with TPC native clusters&quot;</span>},</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                                                   {<span class="stringliteral">&quot;clustermcbranch&quot;</span>, <span class="stringliteral">&quot;TPCClusterNativeMCTruth&quot;</span>, <span class="stringliteral">&quot;MC label branch&quot;</span>},</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                                                   <a class="code" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSTERNATIVE&quot;</span>},</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                                   <a class="code" href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">OutputSpec</a>{<span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLNATIVEMCLBL&quot;</span>},</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                                                   tpcSectors,</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                                                   laneConfiguration,</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                                                 },</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                                 propagateMC));</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;  }</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;  <span class="comment">// output matrix</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;  <span class="keywordtype">bool</span> runTracker = isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a259e64c61d5d1036664ae826072cafc0">OutputType::Tracks</a>);</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;  <span class="keywordtype">bool</span> runDecoder = !caClusterer &amp;&amp; (runTracker || isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a9b99bf7d2bfd4b09363304c166832734">OutputType::Clusters</a>));</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;  <span class="keywordtype">bool</span> runClusterer = !caClusterer &amp;&amp; (runDecoder || isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">OutputType::Raw</a>));</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;  <span class="comment">// input matrix</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;  runClusterer &amp;= inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a02d3268c1419bc6522d01c0606e67cb9">InputType::Digitizer</a> || inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">InputType::Digits</a>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;  runDecoder &amp;= runClusterer || inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">InputType::Raw</a>;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;  runTracker &amp;= caClusterer || (runDecoder || inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">InputType::Clusters</a>);</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;  <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a7daf5fb16896e1e754a18cfcf37e665b">WorkflowSpec</a> parallelProcessors;</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;  <span class="comment">// clusterer process(es)</span></div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;  <span class="keywordflow">if</span> (runClusterer) {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;    parallelProcessors.push_back(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#a9ba90105ea2f6cbd5aa06df72b7c89e7">o2::tpc::getClustererSpec</a>(propagateMC));</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;  }</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;  <span class="comment">// cluster decoder process(es)</span></div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;  <span class="keywordflow">if</span> (runDecoder) {</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;    parallelProcessors.push_back(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#af8044f0f0c8d9b83f93353b53026edd8">o2::tpc::getClusterDecoderRawSpec</a>(propagateMC));</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;  }</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;  <span class="comment">// set up parallel TPC lanes</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;  <span class="comment">// the parallelPipeline helper distributes the subspec ids from the lane configuration</span></div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;  <span class="comment">// among the pipelines. All inputs and outputs of processors of one pipeline will be</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;  <span class="comment">// cloned by the number of subspecs served by this pipeline and amended with the subspecs</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;  parallelProcessors = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a215bab23417c3445f2c573e4c28a0495">parallelPipeline</a>(</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;    parallelProcessors, nLanes,</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;    [&amp;laneConfiguration]() { <span class="keywordflow">return</span> laneConfiguration.size(); },</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;    [&amp;laneConfiguration](<span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>) { <span class="keywordflow">return</span> laneConfiguration[<a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>]; });</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;  specs.insert(specs.end(), parallelProcessors.begin(), parallelProcessors.end());</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;  <span class="comment">// generation of processor specs for various types of outputs</span></div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;  <span class="comment">// based on generic RootTreeWriter and MakeRootTreeWriterSpec generator</span></div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;  <span class="comment">// -------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;  <span class="comment">// the callbacks for the RootTreeWriter</span></div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;  <span class="comment">// The generic writer needs a way to associate incoming data with the individual branches for</span></div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;  <span class="comment">// the TPC sectors. The sector number is transmitted as part of the sector header, the callback</span></div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;  <span class="comment">// finds the corresponding index in the vector of configured sectors</span></div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;  <span class="keyword">auto</span> getIndex = [tpcSectors](<a class="code" href="../../d3/da6/structo2_1_1framework_1_1DataRef.html">o2::framework::DataRef</a> <span class="keyword">const</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>) {</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>* tpcSectorHeader = o2::framework::DataRefUtils::getHeader&lt;o2::tpc::TPCSectorHeader*&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;    <span class="keywordflow">if</span> (!tpcSectorHeader) {</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;      <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;TPC sector header missing in header stack&quot;</span>);</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;    }</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;    <span class="keywordflow">if</span> (tpcSectorHeader-&gt;sector &lt; 0) {</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;      <span class="comment">// special data sets, don&#39;t write</span></div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;      <span class="keywordflow">return</span> ~(size_t)0;</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;    }</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;    <span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a> = 0;</div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;    <span class="keywordflow">for</span> (<span class="keyword">auto</span> <span class="keyword">const</span>&amp; sector : tpcSectors) {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;      <span class="keywordflow">if</span> (sector == tpcSectorHeader-&gt;sector) {</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;      }</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;      ++<a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>;</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;    }</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;    <span class="keywordflow">throw</span> std::runtime_error(<span class="stringliteral">&quot;sector &quot;</span> + std::to_string(tpcSectorHeader-&gt;sector) + <span class="stringliteral">&quot; not configured for writing&quot;</span>);</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;  };</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;  <span class="keyword">auto</span> <a class="code" href="../../d9/df7/ConfigurableParamHelper_8cxx.html#a82d3ab4ac5e230e789bbfccc18d62a90">getName</a> = [tpcSectors](std::string base, <span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>) {</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;    <span class="keywordflow">return</span> base + <span class="stringliteral">&quot;_&quot;</span> + std::to_string(tpcSectors.at(<a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>));</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;  };</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;  <span class="comment">// check if the process is ready to quit</span></div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;  <span class="comment">// this is decided upon the meta information in the TPC sector header, the operation is set as</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;  <span class="comment">// a negative number in the sector member, -2 indicates no-operation, -1 indicates end-of-data</span></div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;  <span class="comment">// see also PublisherSpec.cxx</span></div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;  <span class="comment">// in this workflow, the EOD is sent after the last real data, and all inputs will receive EOD,</span></div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;  <span class="comment">// so it is enough to check on the first occurence</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;  <span class="comment">// FIXME: this will be changed once DPL can propagate control events like EOD</span></div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;  <span class="keyword">auto</span> checkReady = [](<a class="code" href="../../d3/da6/structo2_1_1framework_1_1DataRef.html">o2::framework::DataRef</a> <span class="keyword">const</span>&amp; <a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>) {</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;    <span class="keyword">auto</span> <span class="keyword">const</span>* tpcSectorHeader = o2::framework::DataRefUtils::getHeader&lt;o2::tpc::TPCSectorHeader*&gt;(<a class="code" href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a>);</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;    <span class="comment">// sector number -1 indicates end-of-data</span></div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;    <span class="keywordflow">if</span> (tpcSectorHeader != <span class="keyword">nullptr</span>) {</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;      <span class="keywordflow">if</span> (tpcSectorHeader-&gt;sector == -1) {</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;        <span class="comment">// indicate normal processing if not ready and skip if ready</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;        <span class="keywordflow">return</span> std::make_tuple(MakeRootTreeWriterSpec::TerminationCondition::Action::SkipProcessing, <span class="keyword">true</span>);</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;      }</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;    }</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;    <span class="keywordflow">return</span> std::make_tuple(MakeRootTreeWriterSpec::TerminationCondition::Action::DoProcessing, <span class="keyword">false</span>);</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;  };</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;  <span class="comment">// -------------------------------------------------------------------------------------------</span></div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;  <span class="comment">// helper to create writer specs for different types of output</span></div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;  <span class="keyword">auto</span> makeWriterSpec = [tpcSectors, laneConfiguration, propagateMC, getIndex, <a class="code" href="../../d9/df7/ConfigurableParamHelper_8cxx.html#a82d3ab4ac5e230e789bbfccc18d62a90">getName</a>, checkReady](<span class="keyword">const</span> <span class="keywordtype">char</span>* processName,</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;                                                                                                    <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultFileName,</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                                                                                                    <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultTreeName,</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                                                                                                    <span class="keyword">auto</span>&amp;&amp; databranch,</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                                                                                                    <span class="keyword">auto</span>&amp;&amp; mcbranch) {</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;    <span class="keywordflow">if</span> (tpcSectors.size() == 0) {</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;      <span class="keywordflow">throw</span> std::invalid_argument(std::string(<span class="stringliteral">&quot;writer process configuration needs list of TPC sectors&quot;</span>));</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;    }</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;    <span class="keyword">auto</span> amendInput = [tpcSectors, laneConfiguration](<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>&amp; input, <span class="keywordtype">size_t</span> <a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>) {</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      input.binding += std::to_string(laneConfiguration[<a class="code" href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a>]);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;      <a class="code" href="../../d3/d7b/structo2_1_1framework_1_1DataSpecUtils.html#ac7d4c73f48b3ab9c413a7c04a896868a">DataSpecUtils::updateMatchingSubspec</a>(input, laneConfiguration[index]);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;    };</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;    <span class="keyword">auto</span> amendBranchDef = [laneConfiguration, propagateMC, amendInput, tpcSectors, getIndex, <a class="code" href="../../d9/df7/ConfigurableParamHelper_8cxx.html#a82d3ab4ac5e230e789bbfccc18d62a90">getName</a>](<span class="keyword">auto</span>&amp;&amp; <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>) {</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>.keys = <a class="code" href="../../dd/d8d/namespaceo2_1_1framework.html#a9ef5348ee14533cea9aeadad2c14ae91">mergeInputs</a>(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>.keys, laneConfiguration.size(), amendInput);</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;      <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>.nofBranches = tpcSectors.size();</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;      <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>.getIndex = getIndex;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;      <a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>.getName = <a class="code" href="../../d9/df7/ConfigurableParamHelper_8cxx.html#a82d3ab4ac5e230e789bbfccc18d62a90">getName</a>;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;      <span class="keywordflow">return</span> std::move(<a class="code" href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a>);</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;    };</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;    <span class="comment">// depending on the MC propagation flag, the RootTreeWriter spec is created with two</span></div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;    <span class="comment">// or one branch definition</span></div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;    <span class="keywordflow">if</span> (propagateMC) {</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;      <span class="keywordflow">return</span> std::move(<a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">MakeRootTreeWriterSpec</a>(processName, defaultFileName, defaultTreeName,</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;                                              <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">MakeRootTreeWriterSpec::TerminationCondition</a>{checkReady},</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;                                              std::move(amendBranchDef(databranch)),</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;                                              std::move(amendBranchDef(mcbranch)))());</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;    }</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;    <span class="keywordflow">return</span> std::move(<a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">MakeRootTreeWriterSpec</a>(processName, defaultFileName, defaultTreeName,</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;                                            <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">MakeRootTreeWriterSpec::TerminationCondition</a>{checkReady},</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;                                            std::move(amendBranchDef(databranch)))());</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;  };</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;  <span class="comment">// a writer process for digits</span></div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;  <span class="comment">// selected by output type &#39;difits&#39;</span></div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;  <span class="keywordflow">if</span> (isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">OutputType::Digits</a>)) {</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;    <span class="keyword">using</span> DigitOutputType = std::vector&lt;o2::tpc::Digit&gt;;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;    <span class="keyword">using</span> <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">MCLabelContainer</a> = <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt;o2::MCCompLabel&gt;</a>;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;    specs.push_back(makeWriterSpec(<span class="stringliteral">&quot;tpc-digits-writer&quot;</span>,</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;                                   inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">InputType::Digits</a> ? <span class="stringliteral">&quot;tpc-filtered-digits.root&quot;</span> : <span class="stringliteral">&quot;tpcdigits.root&quot;</span>,</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;                                   <span class="stringliteral">&quot;o2sim&quot;</span>,</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;                                   <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;DigitOutputType&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;DIGITS&quot;</span>, 0},</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;                                                                     <span class="stringliteral">&quot;TPCDigit&quot;</span>,</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;                                                                     <span class="stringliteral">&quot;digit-branch-name&quot;</span>},</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;                                   <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;MCLabelContainer&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;mc&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;DIGITSMCTR&quot;</span>, 0},</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;                                                                      <span class="stringliteral">&quot;TPCDigitMCTruth&quot;</span>,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                                                      <span class="stringliteral">&quot;digitmc-branch-name&quot;</span>}));</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;  }</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;  <span class="comment">// a writer process for raw hardware clusters</span></div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;  <span class="comment">// selected by output type &#39;raw&#39;</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;  <span class="keywordflow">if</span> (isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">OutputType::Raw</a>)) {</div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;    <span class="keyword">using</span> <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">MCLabelContainer</a> = <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt;o2::MCCompLabel&gt;</a>;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;    specs.push_back(makeWriterSpec(<span class="stringliteral">&quot;tpc-raw-cluster-writer&quot;</span>,</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                                   inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">InputType::Raw</a> ? <span class="stringliteral">&quot;tpc-filtered-raw-clusters.root&quot;</span> : <span class="stringliteral">&quot;tpc-raw-clusters.root&quot;</span>,</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                                   <span class="stringliteral">&quot;tpcraw&quot;</span>,</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;                                   <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;const char*&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSTERHW&quot;</span>, 0},</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;                                                                 <span class="stringliteral">&quot;TPCClusterHw&quot;</span>,</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;                                                                 <span class="stringliteral">&quot;databranch&quot;</span>},</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;                                   <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;MCLabelContainer&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;mc&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSTERHWMCLBL&quot;</span>, 0},</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;                                                                      <span class="stringliteral">&quot;TPCClusterHwMCTruth&quot;</span>,</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;                                                                      <span class="stringliteral">&quot;mcbranch&quot;</span>}));</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;  }</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;  <span class="comment">// a writer process for TPC native clusters</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;  <span class="comment">// selected by output type &#39;clusters&#39;</span></div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;  <span class="keywordflow">if</span> (isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a9b99bf7d2bfd4b09363304c166832734">OutputType::Clusters</a>)) {</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;    <span class="keyword">using</span> MCLabelCollection = std::vector&lt;o2::dataformats::MCTruthContainer&lt;o2::MCCompLabel&gt;&gt;;</div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;    specs.push_back(makeWriterSpec(<span class="stringliteral">&quot;tpc-native-cluster-writer&quot;</span>,</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;                                   inputType == <a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">InputType::Clusters</a> ? <span class="stringliteral">&quot;tpc-filtered-native-clusters.root&quot;</span> : <span class="stringliteral">&quot;tpc-native-clusters.root&quot;</span>,</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;                                   <span class="stringliteral">&quot;tpcrec&quot;</span>,</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;                                   <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;const char*&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;data&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSTERNATIVE&quot;</span>, 0},</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;                                                                 <span class="stringliteral">&quot;TPCClusterNative&quot;</span>,</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;                                                                 <span class="stringliteral">&quot;databranch&quot;</span>},</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;                                   <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;MCLabelCollection&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;mc&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLNATIVEMCLBL&quot;</span>, 0},</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;                                                                       <span class="stringliteral">&quot;TPCClusterNativeMCTruth&quot;</span>,</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;                                                                       <span class="stringliteral">&quot;mcbranch&quot;</span>}));</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;  }</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;  <span class="comment">// tracker process</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;  <span class="comment">// selected by output type &#39;tracks&#39;</span></div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;  <span class="keywordflow">if</span> (runTracker) {</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;    specs.emplace_back(<a class="code" href="../../d0/d0a/namespaceo2_1_1tpc.html#ad0756740c5c8cb657ebcabfa63494664">o2::tpc::getCATrackerSpec</a>(propagateMC, caClusterer, laneConfiguration));</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;  }</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;  <span class="comment">// a writer process for tracks</span></div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;  <span class="comment">//</span></div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;  <span class="comment">// selected by output type &#39;tracks&#39;</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;  <span class="keywordflow">if</span> (isEnabled(<a class="code" href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a259e64c61d5d1036664ae826072cafc0">OutputType::Tracks</a>)) {</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;    <span class="comment">// defining the track writer process using the generic RootTreeWriter and generator tool</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;    <span class="comment">//</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;    <span class="comment">// defaults</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* processName = <span class="stringliteral">&quot;tpc-track-writer&quot;</span>;</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultFileName = <span class="stringliteral">&quot;tpctracks.root&quot;</span>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;    <span class="keyword">const</span> <span class="keywordtype">char</span>* defaultTreeName = <span class="stringliteral">&quot;tpcrec&quot;</span>;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;    <span class="comment">//branch definitions for RootTreeWriter spec</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;    <span class="keyword">using</span> TrackOutputType = std::vector&lt;o2::tpc::TrackTPC&gt;;</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;    <span class="keyword">using</span> ClusRefsOutputType = std::vector&lt;o2::tpc::TPCClRefElem&gt;;</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;    <span class="keyword">using</span> <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">MCLabelContainer</a> = <a class="code" href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt;o2::MCCompLabel&gt;</a>;</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;    <span class="keyword">auto</span> tracksdef = <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;TrackOutputType&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;inputTracks&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;TRACKS&quot;</span>},      <span class="comment">//</span></div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;                                                       <span class="stringliteral">&quot;TPCTracks&quot;</span>, <span class="stringliteral">&quot;track-branch-name&quot;</span>};              <span class="comment">//</span></div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;    <span class="keyword">auto</span> clrefdef = <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;ClusRefsOutputType&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;inputClusRef&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;CLUSREFS&quot;</span>}, <span class="comment">//</span></div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                                                         <span class="stringliteral">&quot;ClusRefs&quot;</span>, <span class="stringliteral">&quot;trackclusref-branch-name&quot;</span>};      <span class="comment">//</span></div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;    <span class="keyword">auto</span> mcdef = <a class="code" href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">BranchDefinition&lt;MCLabelContainer&gt;</a>{<a class="code" href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">InputSpec</a>{<span class="stringliteral">&quot;mcinput&quot;</span>, <span class="stringliteral">&quot;TPC&quot;</span>, <span class="stringliteral">&quot;TRACKMCLBL&quot;</span>},         <span class="comment">//</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                                                    <span class="stringliteral">&quot;TPCTracksMCTruth&quot;</span>, <span class="stringliteral">&quot;trackmc-branch-name&quot;</span>};        <span class="comment">//</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;    <span class="comment">// depending on the MC propagation flag, the RootTreeWriter spec is created with 3 or 2</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;    <span class="comment">// branch definition</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;    <span class="keywordflow">if</span> (propagateMC) {</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      specs.push_back(<a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">MakeRootTreeWriterSpec</a>(processName, defaultFileName, defaultTreeName,            <span class="comment">//</span></div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                                             MakeRootTreeWriterSpec::TerminationPolicy::Process,       <span class="comment">//</span></div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                                             <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">MakeRootTreeWriterSpec::TerminationCondition</a>{checkReady}, <span class="comment">//</span></div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                                             std::move(tracksdef), std::move(clrefdef),                <span class="comment">//</span></div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;                                             std::move(mcdef))());                                     <span class="comment">//</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;    } <span class="keywordflow">else</span> {                                                                                           <span class="comment">//</span></div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;      specs.push_back(<a class="code" href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">MakeRootTreeWriterSpec</a>(processName, defaultFileName, defaultTreeName,            <span class="comment">//</span></div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                                             MakeRootTreeWriterSpec::TerminationPolicy::Process,       <span class="comment">//</span></div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;                                             <a class="code" href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">MakeRootTreeWriterSpec::TerminationCondition</a>{checkReady}, <span class="comment">//</span></div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;                                             std::move(tracksdef), std::move(clrefdef))());            <span class="comment">//</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;    }</div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;  }</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;  <span class="keywordflow">return</span> std::move(specs);</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;}</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;} <span class="comment">// end namespace reco_workflow</span></div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;} <span class="comment">// end namespace tpc</span></div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;} <span class="comment">// end namespace o2</span></div><div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a6d4dad0d73541e04c795718ab0fcc384"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a6d4dad0d73541e04c795718ab0fcc384">o2::tpc::reco_workflow::InputMap</a></div><div class="ttdeci">const std::unordered_map&lt; std::string, InputType &gt; InputMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/TPC_2workflow_2src_2RecoWorkflow_8cxx_source.html#l00056">RecoWorkflow.cxx:56</a></div></div>
<div class="ttc" id="WorkflowSpec_8h_html"><div class="ttname"><a href="../../df/da1/WorkflowSpec_8h.html">WorkflowSpec.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_ab7082df7a7249abea9f0722d40b532e0a259e64c61d5d1036664ae826072cafc0"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a259e64c61d5d1036664ae826072cafc0">o2::tpc::reco_workflow::OutputType::Tracks</a></div></div>
<div class="ttc" id="namespaceo2_html"><div class="ttname"><a href="../../d4/d7c/namespaceo2.html">o2</a></div><div class="ttdoc">a couple of static helper functions to create timestamp values for CCDB queries </div><div class="ttdef"><b>Definition:</b> <a href="../../d8/d24/BitstreamReader_8h_source.html#l00022">BitstreamReader.h:22</a></div></div>
<div class="ttc" id="CATrackerSpec_8h_html"><div class="ttname"><a href="../../d3/d55/CATrackerSpec_8h.html">CATrackerSpec.h</a></div><div class="ttdoc">Processor spec for running TPC CA tracking. </div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a7daf5fb16896e1e754a18cfcf37e665b"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a7daf5fb16896e1e754a18cfcf37e665b">o2::framework::WorkflowSpec</a></div><div class="ttdeci">std::vector&lt; DataProcessorSpec &gt; WorkflowSpec</div><div class="ttdef"><b>Definition:</b> <a href="../../df/da1/WorkflowSpec_8h_source.html#l00024">WorkflowSpec.h:24</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_html_ad0756740c5c8cb657ebcabfa63494664"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#ad0756740c5c8cb657ebcabfa63494664">o2::tpc::getCATrackerSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getCATrackerSpec(bool processMC, bool caClusterer, std::vector&lt; int &gt; const &amp;inputIds)</div><div class="ttdef"><b>Definition:</b> <a href="../../da/d78/CATrackerSpec_8cxx_source.html#l00059">CATrackerSpec.cxx:59</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition_html"><div class="ttname"><a href="../../d7/d8b/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1TerminationCondition.html">o2::framework::MakeRootTreeWriterSpec::TerminationCondition</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00203">MakeRootTreeWriterSpec.h:203</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a9b99bf7d2bfd4b09363304c166832734">o2::tpc::reco_workflow::InputType::Clusters</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_ab7082df7a7249abea9f0722d40b532e0a9b99bf7d2bfd4b09363304c166832734"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0a9b99bf7d2bfd4b09363304c166832734">o2::tpc::reco_workflow::OutputType::Clusters</a></div></div>
<div class="ttc" id="MakeRootTreeWriterSpec_8h_html"><div class="ttname"><a href="../../d5/dc8/MakeRootTreeWriterSpec_8h.html">MakeRootTreeWriterSpec.h</a></div><div class="ttdoc">Configurable generator for RootTreeWriter processor spec. </div></div>
<div class="ttc" id="structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition_html"><div class="ttname"><a href="../../dc/d61/structo2_1_1framework_1_1MakeRootTreeWriterSpec_1_1BranchDefinition.html">o2::framework::MakeRootTreeWriterSpec::BranchDefinition</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00233">MakeRootTreeWriterSpec.h:233</a></div></div>
<div class="ttc" id="DataSpecUtils_8h_html"><div class="ttname"><a href="../../d6/d68/DataSpecUtils_8h.html">DataSpecUtils.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a215bab23417c3445f2c573e4c28a0495"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a215bab23417c3445f2c573e4c28a0495">o2::framework::parallelPipeline</a></div><div class="ttdeci">WorkflowSpec parallelPipeline(const WorkflowSpec &amp;specs, size_t nPipelines, std::function&lt; size_t()&gt; getNumberOfSubspecs, std::function&lt; size_t(size_t)&gt; getSubSpec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d43/WorkflowSpec_8cxx_source.html#l00054">WorkflowSpec.cxx:54</a></div></div>
<div class="ttc" id="TrackTPC_8h_html"><div class="ttname"><a href="../../d5/dc9/TrackTPC_8h.html">TrackTPC.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_html_a9ba90105ea2f6cbd5aa06df72b7c89e7"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a9ba90105ea2f6cbd5aa06df72b7c89e7">o2::tpc::getClustererSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getClustererSpec(bool sendMC)</div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d17/TPC_2workflow_2src_2ClustererSpec_8cxx_source.html#l00043">ClustererSpec.cxx:43</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1DataSpecUtils_html_ac7d4c73f48b3ab9c413a7c04a896868a"><div class="ttname"><a href="../../d3/d7b/structo2_1_1framework_1_1DataSpecUtils.html#ac7d4c73f48b3ab9c413a7c04a896868a">o2::framework::DataSpecUtils::updateMatchingSubspec</a></div><div class="ttdeci">static void updateMatchingSubspec(InputSpec &amp;in, header::DataHeader::SubSpecificationType subSpec)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dab/DataSpecUtils_8cxx_source.html#l00135">DataSpecUtils.cxx:135</a></div></div>
<div class="ttc" id="DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h_html"><div class="ttname"><a href="../../d0/dda/DataFormats_2Detectors_2TPC_2include_2DataFormatsTPC_2Constants_8h.html">Constants.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a1051b04f09c0cf06b4290d2caab0856f">o2::tpc::reco_workflow::InputType::Digits</a></div></div>
<div class="ttc" id="Detectors_2TPC_2base_2include_2TPCBase_2Digit_8h_html"><div class="ttname"><a href="../../d0/d4f/Detectors_2TPC_2base_2include_2TPCBase_2Digit_8h.html">Digit.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_aebd5ed60acdcf3d977f7924f2974b4f1"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#aebd5ed60acdcf3d977f7924f2974b4f1">o2::tpc::reco_workflow::OutputMap</a></div><div class="ttdeci">const std::unordered_map&lt; std::string, OutputType &gt; OutputMap</div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/TPC_2workflow_2src_2RecoWorkflow_8cxx_source.html#l00063">RecoWorkflow.cxx:63</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a7a79715dc848ee61a9cd3a252a903391"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a7a79715dc848ee61a9cd3a252a903391">o2::tpc::reco_workflow::getWorkflow</a></div><div class="ttdeci">framework::WorkflowSpec getWorkflow(std::vector&lt; int &gt; const &amp;tpcSectors, std::vector&lt; int &gt; const &amp;laneConfiguration, bool propagateMC=true, unsigned nLanes=1, std::string const &amp;cfgInput=&quot;digitizer&quot;, std::string const &amp;cfgOutput=&quot;tracks&quot;, int caClusterer=0)</div><div class="ttdoc">create the workflow for TPC reconstruction </div><div class="ttdef"><b>Definition:</b> <a href="../../d0/d80/TPC_2workflow_2src_2RecoWorkflow_8cxx_source.html#l00070">RecoWorkflow.cxx:70</a></div></div>
<div class="ttc" id="glcorearb_8h_html_ad32bdec748ba376f6c0d2df39ab9a95b"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#ad32bdec748ba376f6c0d2df39ab9a95b">ref</a></div><div class="ttdeci">GLint ref</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00291">glcorearb.h:291</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a5c64fe71cf0dcf8c7d6197062a3b8b57a02d3268c1419bc6522d01c0606e67cb9"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a02d3268c1419bc6522d01c0606e67cb9">o2::tpc::reco_workflow::InputType::Digitizer</a></div></div>
<div class="ttc" id="classo2_1_1framework_1_1MakeRootTreeWriterSpec_html"><div class="ttname"><a href="../../da/d9b/classo2_1_1framework_1_1MakeRootTreeWriterSpec.html">o2::framework::MakeRootTreeWriterSpec</a></div><div class="ttdoc">Generate a processor spec for the RootTreeWriter utility. </div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dc8/MakeRootTreeWriterSpec_8h_source.html#l00190">MakeRootTreeWriterSpec.h:190</a></div></div>
<div class="ttc" id="structo2_1_1tpc_1_1PublisherConf_html"><div class="ttname"><a href="../../de/d7a/structo2_1_1tpc_1_1PublisherConf.html">o2::tpc::PublisherConf</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d4e/TPC_2workflow_2include_2TPCWorkflow_2PublisherSpec_8h_source.html#l00028">PublisherSpec.h:28</a></div></div>
<div class="ttc" id="namespaceo2_1_1framework_html_a9ef5348ee14533cea9aeadad2c14ae91"><div class="ttname"><a href="../../dd/d8d/namespaceo2_1_1framework.html#a9ef5348ee14533cea9aeadad2c14ae91">o2::framework::mergeInputs</a></div><div class="ttdeci">Inputs mergeInputs(InputSpec original, size_t maxIndex, std::function&lt; void(InputSpec &amp;, size_t)&gt; amendCallback)</div><div class="ttdef"><b>Definition:</b> <a href="../../d1/d43/WorkflowSpec_8cxx_source.html#l00113">WorkflowSpec.cxx:113</a></div></div>
<div class="ttc" id="TPC_2workflow_2include_2TPCWorkflow_2ClustererSpec_8h_html"><div class="ttname"><a href="../../d7/da4/TPC_2workflow_2include_2TPCWorkflow_2ClustererSpec_8h.html">ClustererSpec.h</a></div></div>
<div class="ttc" id="classo2_1_1dataformats_1_1MCTruthContainer_html"><div class="ttname"><a href="../../dc/daa/classo2_1_1dataformats_1_1MCTruthContainer.html">o2::dataformats::MCTruthContainer&lt; o2::MCCompLabel &gt;</a></div></div>
<div class="ttc" id="TPC_2workflow_2include_2TPCWorkflow_2RecoWorkflow_8h_html"><div class="ttname"><a href="../../df/d08/TPC_2workflow_2include_2TPCWorkflow_2RecoWorkflow_8h.html">RecoWorkflow.h</a></div></div>
<div class="ttc" id="ClusterDecoderRawSpec_8h_html"><div class="ttname"><a href="../../d3/dfa/ClusterDecoderRawSpec_8h.html">ClusterDecoderRawSpec.h</a></div><div class="ttdoc">Processor spec for decoder of TPC raw cluster data. </div></div>
<div class="ttc" id="ClusterGroupAttribute_8h_html"><div class="ttname"><a href="../../d8/dc8/ClusterGroupAttribute_8h.html">ClusterGroupAttribute.h</a></div><div class="ttdoc">Meta data for a group describing it by sector number and global padrow. </div></div>
<div class="ttc" id="MCCompLabel_8h_html"><div class="ttname"><a href="../../d7/dcd/MCCompLabel_8h.html">MCCompLabel.h</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1OutputSpec_html"><div class="ttname"><a href="../../d8/dc3/structo2_1_1framework_1_1OutputSpec.html">o2::framework::OutputSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../db/d2d/OutputSpec_8h_source.html#l00029">OutputSpec.h:29</a></div></div>
<div class="ttc" id="glcorearb_8h_html_a57f14e05b1900f16a2da82ade47d0c6d"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a57f14e05b1900f16a2da82ade47d0c6d">index</a></div><div class="ttdeci">GLuint index</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00781">glcorearb.h:781</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57a65e65c8ab0d8609ce12fc68a03cb8e00">o2::tpc::reco_workflow::InputType::Raw</a></div></div>
<div class="ttc" id="MCTruthContainer_8h_html"><div class="ttname"><a href="../../db/d14/MCTruthContainer_8h.html">MCTruthContainer.h</a></div><div class="ttdoc">Definition of a container to keep Monte Carlo truth external to simulation objects. </div></div>
<div class="ttc" id="glcorearb_8h_html_a7d05960f4f1c1b11f3177dc963a45d86"><div class="ttname"><a href="../../dc/da3/glcorearb_8h.html#a7d05960f4f1c1b11f3177dc963a45d86">type</a></div><div class="ttdeci">GLint GLint GLsizei GLint GLenum GLenum type</div><div class="ttdef"><b>Definition:</b> <a href="../../dc/da3/glcorearb_8h_source.html#l00275">glcorearb.h:275</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_html_a741ff666157ca42314ba203533118eb4"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#a741ff666157ca42314ba203533118eb4">o2::tpc::getPublisherSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getPublisherSpec(PublisherConf const &amp;config, bool propagateMC=true)</div><div class="ttdef"><b>Definition:</b> <a href="../../d4/dac/TPC_2workflow_2src_2PublisherSpec_8cxx_source.html#l00042">PublisherSpec.cxx:42</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1DataRef_html"><div class="ttname"><a href="../../d3/da6/structo2_1_1framework_1_1DataRef.html">o2::framework::DataRef</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/dfb/DataRef_8h_source.html#l00020">DataRef.h:20</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_ab7082df7a7249abea9f0722d40b532e0"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#ab7082df7a7249abea9f0722d40b532e0">o2::tpc::reco_workflow::OutputType</a></div><div class="ttdeci">OutputType</div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/TPC_2workflow_2include_2TPCWorkflow_2RecoWorkflow_8h_source.html#l00036">RecoWorkflow.h:36</a></div></div>
<div class="ttc" id="qconfigoptions_8h_html_a67e8046d706780a986e5238c73d9c922"><div class="ttname"><a href="../../d8/de9/qconfigoptions_8h.html#a67e8046d706780a986e5238c73d9c922">def</a></div><div class="ttdeci">Visualize clusters only Timeframe settings Average distance in cm of events merged into Randomize distance around average distance of merged events Simulate correct bunch interactions instead of placing only the average number of events A value [n] sets TFlen for [n] collisions in Number of bunches per train Number of bunch trains Instantaneous interaction rate Do not simulate border def(1)) AddOption(nTotalInTFEvents</div></div>
<div class="ttc" id="TPCSectorHeader_8h_html"><div class="ttname"><a href="../../d3/d09/TPCSectorHeader_8h.html">TPCSectorHeader.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_html_af8044f0f0c8d9b83f93353b53026edd8"><div class="ttname"><a href="../../d0/d0a/namespaceo2_1_1tpc.html#af8044f0f0c8d9b83f93353b53026edd8">o2::tpc::getClusterDecoderRawSpec</a></div><div class="ttdeci">framework::DataProcessorSpec getClusterDecoderRawSpec(bool sendMC=false)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/d7b/ClusterDecoderRawSpec_8cxx_source.html#l00050">ClusterDecoderRawSpec.cxx:50</a></div></div>
<div class="ttc" id="ConfigurableParamHelper_8cxx_html_a82d3ab4ac5e230e789bbfccc18d62a90"><div class="ttname"><a href="../../d9/df7/ConfigurableParamHelper_8cxx.html#a82d3ab4ac5e230e789bbfccc18d62a90">getName</a></div><div class="ttdeci">std::string getName(const TDataMember *dm, int index, int size)</div><div class="ttdef"><b>Definition:</b> <a href="../../d9/df7/ConfigurableParamHelper_8cxx_source.html#l00111">ConfigurableParamHelper.cxx:111</a></div></div>
<div class="ttc" id="structo2_1_1framework_1_1InputSpec_html"><div class="ttname"><a href="../../da/d96/structo2_1_1framework_1_1InputSpec.html">o2::framework::InputSpec</a></div><div class="ttdef"><b>Definition:</b> <a href="../../d5/d3f/InputSpec_8h_source.html#l00029">InputSpec.h:29</a></div></div>
<div class="ttc" id="RangeTokenizer_8h_html"><div class="ttname"><a href="../../db/dc5/RangeTokenizer_8h.html">RangeTokenizer.h</a></div><div class="ttdoc">Helper function to tokenize sequences and ranges of integral numbers. </div></div>
<div class="ttc" id="TPC_2workflow_2include_2TPCWorkflow_2PublisherSpec_8h_html"><div class="ttname"><a href="../../d9/d4e/TPC_2workflow_2include_2TPCWorkflow_2PublisherSpec_8h.html">PublisherSpec.h</a></div></div>
<div class="ttc" id="namespaceo2_1_1tpc_1_1reco__workflow_html_a5c64fe71cf0dcf8c7d6197062a3b8b57"><div class="ttname"><a href="../../db/d81/namespaceo2_1_1tpc_1_1reco__workflow.html#a5c64fe71cf0dcf8c7d6197062a3b8b57">o2::tpc::reco_workflow::InputType</a></div><div class="ttdeci">InputType</div><div class="ttdoc">define input and output types of the workflow </div><div class="ttdef"><b>Definition:</b> <a href="../../df/d08/TPC_2workflow_2include_2TPCWorkflow_2RecoWorkflow_8h_source.html#l00031">RecoWorkflow.h:31</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="../../dir_051dca18e802f8e9474f2e30d29c04e0.html">Detectors</a></li><li class="navelem"><a class="el" href="../../dir_a597e8e061b11201a1dff411feb10d0b.html">TPC</a></li><li class="navelem"><a class="el" href="../../dir_9cc61f72f781098a662027b321784562.html">workflow</a></li><li class="navelem"><a class="el" href="../../dir_e9646061f272132c5cb2e771d1ee355f.html">src</a></li><li class="navelem"><a class="el" href="../../d0/d80/TPC_2workflow_2src_2RecoWorkflow_8cxx.html">RecoWorkflow.cxx</a></li>
    <li class="footer">Generated on Wed Feb 19 2020 20:08:16 for Project by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="../../doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
